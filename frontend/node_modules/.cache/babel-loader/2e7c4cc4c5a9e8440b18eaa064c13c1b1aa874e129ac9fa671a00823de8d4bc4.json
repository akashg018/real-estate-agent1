{"ast":null,"code":"var _jsxFileName = \"D:\\\\FreeLance\\\\Real-estate-agent\\\\frontend\\\\src\\\\components\\\\ChatInterface.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Box, TextField, Button, Paper, Typography, Container, CircularProgress, Card, CardContent, CardActions, Chip, Divider, Alert, Dialog, DialogTitle, DialogContent, DialogActions, Grid, Avatar, List, ListItem, ListItemText, Snackbar, Badge, Tooltip, IconButton } from '@mui/material';\nimport RealEstateService from '../services/realEstateService';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ChatInterface = () => {\n  _s();\n  var _selectedProperty$squ;\n  console.log('🎨 =================================');\n  console.log('🎨 CHAT INTERFACE COMPONENT LOADING');\n  console.log('🎨 =================================');\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [properties, setProperties] = useState([]);\n  const [selectedProperty, setSelectedProperty] = useState(null);\n  const [showPropertyDetails, setShowPropertyDetails] = useState(false);\n  const [snackbar, setSnackbar] = useState({\n    open: false,\n    message: '',\n    severity: 'info'\n  });\n  const [searchSuggestions, setSearchSuggestions] = useState([]);\n  const messagesEndRef = useRef(null);\n  console.log('🎨 Component state initialized');\n  console.log('🎨 RealEstateService available:', !!RealEstateService);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    console.log('📜 Scrolling to bottom');\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  useEffect(() => {\n    console.log('📜 Messages updated, scrolling to bottom');\n    scrollToBottom();\n  }, [messages]);\n  useEffect(() => {\n    console.log('🎬 ChatInterface mounted, adding welcome message');\n    const welcomeMessage = {\n      id: 1,\n      text: \"👋 Welcome to AI Real Estate Assistant! I'm here to help you find your perfect home.\\n\\n🏠 I can help you with:\\n• Property searches with smart filtering\\n• Detailed amenities information\\n• Price negotiations\\n• Deal closing process\\n\\nTry asking: 'Find 2BHK apartments in Dallas under $500K'\",\n      sender: 'agent',\n      timestamp: new Date().toISOString(),\n      type: 'welcome'\n    };\n    console.log('🎬 Welcome message created:', welcomeMessage);\n    setMessages([welcomeMessage]);\n  }, []);\n  const handleSubmit = async e => {\n    console.log('📝 =================================');\n    console.log('📝 FORM SUBMIT STARTED');\n    console.log('📝 =================================');\n    e.preventDefault();\n    console.log('📝 Event prevented');\n    console.log('📝 Current input value:', input);\n    console.log('📝 Input trimmed:', input.trim());\n    if (!input.trim()) {\n      console.log('⚠️ Empty input, returning early');\n      return;\n    }\n    console.log('📝 Creating user message...');\n    const userMessage = {\n      id: messages.length + 1,\n      text: input,\n      sender: 'user',\n      timestamp: new Date().toISOString()\n    };\n    console.log('📝 User message created:', userMessage);\n    console.log('📝 Updating messages state...');\n    setMessages(prev => {\n      console.log('📝 Previous messages:', prev);\n      const newMessages = [...prev, userMessage];\n      console.log('📝 New messages array:', newMessages);\n      return newMessages;\n    });\n    const currentInput = input;\n    console.log('📝 Saving current input:', currentInput);\n    console.log('📝 Clearing input field...');\n    setInput('');\n    console.log('📝 Setting loading to true...');\n    setLoading(true);\n    try {\n      var _response$data, _response$data2;\n      console.log('🚀 Starting API call...');\n      console.log('🚀 Calling RealEstateService.chatQuery with:', currentInput);\n\n      // Call the service\n      const response = await RealEstateService.chatQuery(currentInput);\n      console.log('✅ API call completed');\n      console.log('✅ Response received:', response);\n      console.log('✅ Response status:', response.status);\n      console.log('✅ Response message:', response.message);\n      console.log('✅ Response data:', response.data);\n      const agentMessage = {\n        id: messages.length + 2,\n        text: response.message || \"I'm processing your request...\",\n        sender: 'agent',\n        timestamp: new Date().toISOString(),\n        data: response.data,\n        status: response.status\n      };\n      console.log('🤖 Agent message created:', agentMessage);\n      console.log('📝 Adding agent message to state...');\n      setMessages(prev => {\n        console.log('📝 Previous messages before agent response:', prev);\n        const newMessages = [...prev, agentMessage];\n        console.log('📝 Messages after agent response:', newMessages);\n        return newMessages;\n      });\n\n      // Enhanced property handling\n      console.log('🏠 Checking for properties in response...');\n      if ((_response$data = response.data) !== null && _response$data !== void 0 && _response$data.properties && response.data.properties.length > 0) {\n        console.log('🏠 Exact match properties found:', response.data.properties.length);\n        console.log('🏠 First property:', response.data.properties[0]);\n        const processedProperties = response.data.properties.map(p => ({\n          ...p,\n          showAmenities: false,\n          negotiationStatus: 'none',\n          isExactMatch: true\n        }));\n        console.log('🏠 Processed properties:', processedProperties);\n        setProperties(processedProperties);\n        setSearchSuggestions([]);\n        console.log('🏠 Properties state updated');\n      } else if (((_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.alternative_count) > 0) {\n        // Handle alternative properties when no exact matches\n        console.log('🏠 No exact matches, but alternatives available:', response.data.alternative_count);\n        console.log('🏠 Suggestions:', response.data.suggestions);\n\n        // Store suggestions for display\n        setSearchSuggestions(response.data.suggestions || []);\n\n        // Try to get some alternative properties automatically\n        await fetchAlternativeProperties(currentInput, response.data);\n      } else {\n        var _response$data3;\n        console.log('🏠 No properties found in response');\n        setProperties([]);\n        setSearchSuggestions(((_response$data3 = response.data) === null || _response$data3 === void 0 ? void 0 : _response$data3.suggestions) || []);\n      }\n\n      // Show success/error snackbar\n      if (response.status === 'error') {\n        console.log('⚠️ Error response detected, showing snackbar');\n        setSnackbar({\n          open: true,\n          message: 'Something went wrong. Please try again.',\n          severity: 'error'\n        });\n      } else {\n        console.log('✅ Success response detected');\n      }\n    } catch (error) {\n      console.log('💥 =================================');\n      console.log('💥 HANDLE SUBMIT ERROR');\n      console.log('💥 =================================');\n      console.error('💥 Caught error in handleSubmit:', error);\n      console.error('💥 Error name:', error.name);\n      console.error('💥 Error message:', error.message);\n      console.error('💥 Error stack:', error.stack);\n      const errorMessage = {\n        id: messages.length + 2,\n        text: '❌ Sorry, I encountered an error. Please try again or rephrase your question.',\n        sender: 'agent',\n        timestamp: new Date().toISOString(),\n        status: 'error'\n      };\n      console.log('💥 Error message created:', errorMessage);\n      setMessages(prev => [...prev, errorMessage]);\n      setSnackbar({\n        open: true,\n        message: 'Connection error. Please check your internet and try again.',\n        severity: 'error'\n      });\n    } finally {\n      console.log('🏁 Setting loading to false...');\n      setLoading(false);\n      console.log('🏁 Handle submit completed');\n    }\n  };\n  const fetchAlternativeProperties = async (originalQuery, responseData) => {\n    try {\n      console.log('🔄 Fetching alternative properties...');\n\n      // Generate alternative queries based on the original\n      const alternativeQueries = generateAlternativeQueries(originalQuery, responseData);\n      for (const altQuery of alternativeQueries) {\n        var _altResponse$data;\n        console.log('🔄 Trying alternative query:', altQuery);\n        const altResponse = await RealEstateService.chatQuery(altQuery);\n        if ((_altResponse$data = altResponse.data) !== null && _altResponse$data !== void 0 && _altResponse$data.properties && altResponse.data.properties.length > 0) {\n          console.log('🏠 Alternative properties found:', altResponse.data.properties.length);\n          const altProperties = altResponse.data.properties.map(p => ({\n            ...p,\n            showAmenities: false,\n            negotiationStatus: 'none',\n            isAlternative: true\n          }));\n          setProperties(altProperties);\n\n          // Add an info message about alternatives\n          const altMessage = {\n            id: Date.now(),\n            // Use timestamp for unique ID\n            text: `💡 Since no exact matches were found, here are ${altProperties.length} similar properties that might interest you:`,\n            sender: 'agent',\n            timestamp: new Date().toISOString(),\n            type: 'alternatives'\n          };\n          setMessages(prev => [...prev, altMessage]);\n          break; // Stop after finding the first successful alternative\n        }\n      }\n    } catch (error) {\n      console.log('❌ Error fetching alternatives:', error);\n    }\n  };\n  const generateAlternativeQueries = (originalQuery, responseData) => {\n    const alternatives = [];\n\n    // If San Francisco, try other CA cities\n    if (originalQuery.toLowerCase().includes('san francisco')) {\n      alternatives.push(originalQuery.replace(/san francisco/i, 'Los Angeles'));\n      alternatives.push(originalQuery.replace(/san francisco/i, 'San Diego'));\n    }\n\n    // If under certain price, try higher prices\n    if (originalQuery.includes('$500K') || originalQuery.includes('500K')) {\n      alternatives.push(originalQuery.replace(/\\$?500K|\\$?500,000/i, '$600K'));\n      alternatives.push(originalQuery.replace(/\\$?500K|\\$?500,000/i, '$700K'));\n    }\n\n    // Try different cities entirely\n    alternatives.push(originalQuery.replace(/in \\w+( \\w+)?/, 'in Dallas'));\n    alternatives.push(originalQuery.replace(/in \\w+( \\w+)?/, 'in Houston'));\n    alternatives.push(originalQuery.replace(/under \\$\\d+K?/, 'under $600K'));\n\n    // Generic fallback\n    if (alternatives.length === 0) {\n      alternatives.push('Show me 2 bedroom apartments under $600K');\n      alternatives.push('Find available apartments with 2 bedrooms');\n    }\n    return alternatives.slice(0, 3); // Limit to 3 alternatives\n  };\n  const handlePropertyAction = async (property, action, data = {}) => {\n    console.log('🏠 =================================');\n    console.log('🏠 PROPERTY ACTION STARTED');\n    console.log('🏠 =================================');\n    console.log('🏠 Property:', property);\n    console.log('🏠 Action:', action);\n    console.log('🏠 Data:', data);\n    try {\n      let response;\n      switch (action) {\n        case 'showAmenities':\n          console.log('🏢 Fetching amenities for property:', property.id);\n          response = await RealEstateService.getPropertyAmenities(property.id);\n          console.log('🏢 Amenities response:', response);\n          if (response.status === 'success') {\n            console.log('🏢 Updating property amenities in state');\n            setProperties(prev => prev.map(p => p.id === property.id ? {\n              ...p,\n              showAmenities: !p.showAmenities,\n              amenitiesData: response.data\n            } : p));\n          }\n          break;\n        case 'makeOffer':\n          const suggestedOffer = Math.round(property.price * 0.95);\n          console.log('💰 Making offer:', suggestedOffer);\n          setInput(`I want to make an offer of $${suggestedOffer.toLocaleString()} for property ${property.id}`);\n          break;\n        case 'negotiate':\n          console.log('💰 Processing negotiation for property:', property.id);\n          const offerAmount = data.offer || Math.round(property.price * 0.95);\n          response = await RealEstateService.negotiatePrice(property.id, offerAmount);\n          console.log('💰 Negotiation response:', response);\n          if (response.status === 'success') {\n            console.log('💰 Updating negotiation status');\n            setProperties(prev => prev.map(p => p.id === property.id ? {\n              ...p,\n              negotiationStatus: response.data.negotiation_status,\n              negotiationData: response.data\n            } : p));\n            const negotiationMessage = {\n              id: Date.now(),\n              text: response.message,\n              sender: 'agent',\n              timestamp: new Date().toISOString(),\n              data: response.data,\n              type: 'negotiation'\n            };\n            setMessages(prev => [...prev, negotiationMessage]);\n          }\n          break;\n        case 'closeDeal':\n          console.log('🤝 Closing deal for property:', property.id);\n          response = await RealEstateService.finalizeDeal(property.id);\n          console.log('🤝 Deal response:', response);\n          if (response.status === 'success') {\n            console.log('🤝 Updating property deal status');\n            setProperties(prev => prev.map(p => p.id === property.id ? {\n              ...p,\n              dealStatus: 'closed',\n              closingData: response.data\n            } : p));\n            setSnackbar({\n              open: true,\n              message: '🎉 Congratulations! Deal successfully closed!',\n              severity: 'success'\n            });\n          }\n          break;\n        case 'viewDetails':\n          console.log('👀 Viewing details for property:', property.id);\n          setSelectedProperty(property);\n          setShowPropertyDetails(true);\n          break;\n        default:\n          console.warn('❓ Unknown action:', action);\n          break;\n      }\n    } catch (error) {\n      console.error('💥 Property action error:', error);\n      setSnackbar({\n        open: true,\n        message: 'Action failed. Please try again.',\n        severity: 'error'\n      });\n    }\n  };\n  const handleSuggestionClick = suggestion => {\n    console.log('💡 Suggestion clicked:', suggestion);\n\n    // Convert suggestion to a searchable query\n    let query = '';\n    if (suggestion.includes('budget')) {\n      query = input.replace(/under \\$\\d+K?/i, 'under $600K');\n    } else if (suggestion.includes('nearby')) {\n      query = input.replace(/in \\w+( \\w+)?/i, 'in nearby areas');\n    } else {\n      query = suggestion;\n    }\n    setInput(query);\n  };\n  const PropertyCard = ({\n    property\n  }) => {\n    var _property$square_feet;\n    console.log('🎴 Rendering PropertyCard for:', property.id);\n    return /*#__PURE__*/_jsxDEV(Card, {\n      sx: {\n        mb: 2,\n        borderLeft: property.dealStatus === 'closed' ? '4px solid #4caf50' : property.isAlternative ? '4px solid #ff9800' : '4px solid #2196f3',\n        opacity: property.dealStatus === 'closed' ? 0.8 : 1,\n        position: 'relative'\n      },\n      children: [property.isAlternative && /*#__PURE__*/_jsxDEV(Chip, {\n        label: \"Similar Property\",\n        size: \"small\",\n        color: \"warning\",\n        sx: {\n          position: 'absolute',\n          top: 8,\n          right: 8,\n          zIndex: 1\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'flex-start',\n            mb: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            component: \"div\",\n            sx: {\n              flexGrow: 1,\n              pr: 2\n            },\n            children: [\"\\uD83C\\uDFE0 \", property.address]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 13\n          }, this), property.dealStatus === 'closed' && /*#__PURE__*/_jsxDEV(Chip, {\n            label: \"SOLD\",\n            color: \"success\",\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          color: \"text.secondary\",\n          sx: {\n            mb: 1\n          },\n          children: [\"\\uD83D\\uDCCD \", property.city, \", \", property.state]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 2,\n          sx: {\n            mb: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              color: \"success.main\",\n              children: [\"\\uD83D\\uDCB0 $\", property.price.toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              children: [\"\\uD83D\\uDECF\\uFE0F \", property.bedrooms, \" bed\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              children: [\"\\uD83D\\uDEC1 \", property.bathrooms, \" bath\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              children: [\"\\uD83D\\uDCD0 \", (_property$square_feet = property.square_feet) === null || _property$square_feet === void 0 ? void 0 : _property$square_feet.toLocaleString(), \" sqft\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            flexWrap: 'wrap',\n            gap: 1,\n            mb: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Chip, {\n            label: property.property_type,\n            variant: \"outlined\",\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 13\n          }, this), property.is_pet_friendly && /*#__PURE__*/_jsxDEV(Chip, {\n            label: \"\\uD83D\\uDC15 Pet Friendly\",\n            variant: \"outlined\",\n            size: \"small\",\n            color: \"secondary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 15\n          }, this), property.year_built && /*#__PURE__*/_jsxDEV(Chip, {\n            label: `Built ${property.year_built}`,\n            variant: \"outlined\",\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 11\n        }, this), property.showAmenities && property.amenitiesData && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 2,\n            p: 2,\n            bgcolor: 'grey.50',\n            borderRadius: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            sx: {\n              mb: 1,\n              fontWeight: 'bold'\n            },\n            children: \"\\uD83C\\uDFE2 Property Amenities:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 15\n          }, this), property.amenitiesData.amenities && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              flexWrap: 'wrap',\n              gap: 0.5\n            },\n            children: property.amenitiesData.amenities.map((amenity, index) => /*#__PURE__*/_jsxDEV(Chip, {\n              label: amenity,\n              size: \"small\",\n              variant: \"outlined\"\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 13\n        }, this), property.negotiationData && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: property.negotiationData.negotiation_status === 'accepted' ? 'success' : 'info',\n          sx: {\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Negotiation Update:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 15\n          }, this), \" \", property.negotiationData.message || 'Offer under review', property.negotiationData.counter_offer && /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            sx: {\n              mt: 1\n            },\n            children: [\"Counter Offer: $\", property.negotiationData.counter_offer.toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n        sx: {\n          flexWrap: 'wrap',\n          gap: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          size: \"small\",\n          onClick: () => handlePropertyAction(property, 'viewDetails'),\n          children: \"\\u2139\\uFE0F View Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          size: \"small\",\n          onClick: () => handlePropertyAction(property, 'showAmenities'),\n          children: property.showAmenities ? '🔽 Hide Amenities' : '🔼 Show Amenities'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 11\n        }, this), property.dealStatus !== 'closed' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            size: \"small\",\n            variant: \"contained\",\n            onClick: () => handlePropertyAction(property, 'makeOffer'),\n            children: \"\\uD83D\\uDCB0 Make Offer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 15\n          }, this), property.negotiationStatus === 'accepted' && /*#__PURE__*/_jsxDEV(Button, {\n            size: \"small\",\n            color: \"success\",\n            variant: \"contained\",\n            onClick: () => handlePropertyAction(property, 'closeDeal'),\n            children: \"\\u2705 Close Deal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 17\n          }, this), property.negotiationStatus === 'counter_offered' && /*#__PURE__*/_jsxDEV(Button, {\n            size: \"small\",\n            color: \"warning\",\n            variant: \"contained\",\n            onClick: () => {\n              var _property$negotiation;\n              return handlePropertyAction(property, 'negotiate', {\n                offer: (_property$negotiation = property.negotiationData) === null || _property$negotiation === void 0 ? void 0 : _property$negotiation.counter_offer\n              });\n            },\n            children: \"\\uD83E\\uDD1D Accept Counter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 7\n    }, this);\n  };\n  console.log('🎨 Rendering ChatInterface component');\n  console.log('🎨 Current state - messages:', messages.length);\n  console.log('🎨 Current state - properties:', properties.length);\n  console.log('🎨 Current state - loading:', loading);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"lg\",\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        height: '100vh',\n        py: 2,\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 3,\n        sx: {\n          flexGrow: 1,\n          display: 'flex',\n          flexDirection: 'column',\n          borderRadius: 2,\n          overflow: 'hidden'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            p: 2,\n            bgcolor: 'primary.main',\n            color: 'white',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            children: \"\\uD83C\\uDFE0 AI Real Estate Assistant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 13\n          }, this), properties.length > 0 && /*#__PURE__*/_jsxDEV(Badge, {\n            badgeContent: properties.length,\n            color: \"secondary\",\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              children: \"Properties\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 571,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            flexGrow: 1,\n            overflow: 'auto',\n            p: 2,\n            display: 'flex',\n            flexDirection: 'column'\n          },\n          children: [messages.map(message => {\n            console.log('💬 Rendering message:', message.id, message.sender);\n            return /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                justifyContent: message.sender === 'user' ? 'flex-end' : 'flex-start',\n                mb: 2,\n                alignItems: 'flex-start'\n              },\n              children: [message.sender === 'agent' && /*#__PURE__*/_jsxDEV(Avatar, {\n                sx: {\n                  bgcolor: 'secondary.main',\n                  width: 32,\n                  height: 32,\n                  mr: 1,\n                  mt: 0.5\n                },\n                children: \"AI\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 591,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Paper, {\n                sx: {\n                  p: 2,\n                  backgroundColor: message.sender === 'user' ? 'primary.light' : message.status === 'error' ? 'error.light' : message.type === 'alternatives' ? 'warning.light' : 'grey.100',\n                  color: message.sender === 'user' ? 'white' : 'text.primary',\n                  maxWidth: '80%',\n                  borderRadius: 2,\n                  whiteSpace: 'pre-line'\n                },\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body1\",\n                  children: message.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 612,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 596,\n                columnNumber: 19\n              }, this), message.sender === 'user' && /*#__PURE__*/_jsxDEV(Avatar, {\n                sx: {\n                  bgcolor: 'primary.main',\n                  width: 32,\n                  height: 32,\n                  ml: 1,\n                  mt: 0.5\n                },\n                children: \"U\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 616,\n                columnNumber: 21\n              }, this)]\n            }, message.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 17\n            }, this);\n          }), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: messagesEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 11\n        }, this), searchSuggestions.length > 0 && properties.length === 0 && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            px: 2,\n            pb: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            sx: {\n              mb: 1,\n              fontWeight: 'bold'\n            },\n            children: \"\\uD83D\\uDCA1 Try these suggestions:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 629,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              flexWrap: 'wrap',\n              gap: 1\n            },\n            children: searchSuggestions.map((suggestion, index) => /*#__PURE__*/_jsxDEV(Chip, {\n              label: suggestion,\n              variant: \"outlined\",\n              size: \"small\",\n              clickable: true,\n              onClick: () => handleSuggestionClick(suggestion),\n              sx: {\n                cursor: 'pointer'\n              }\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 634,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 632,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 13\n        }, this), properties.length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            maxHeight: '400px',\n            overflow: 'auto',\n            px: 2,\n            pb: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Divider, {\n            sx: {\n              mb: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 651,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n              mb: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              children: [\"\\uD83C\\uDFE0 \", properties.some(p => p.isAlternative) ? 'Similar' : 'Found', \" Properties (\", properties.length, \"):\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 653,\n              columnNumber: 17\n            }, this), properties.some(p => p.isAlternative) && /*#__PURE__*/_jsxDEV(Chip, {\n              label: \"Alternative Results\",\n              color: \"warning\",\n              size: \"small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 657,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 15\n          }, this), properties.map(property => {\n            console.log('🏠 Rendering property card:', property.id);\n            return /*#__PURE__*/_jsxDEV(PropertyCard, {\n              property: property\n            }, property.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 24\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            p: 2,\n            borderTop: '1px solid',\n            borderColor: 'divider'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            component: \"form\",\n            onSubmit: handleSubmit,\n            sx: {\n              display: 'flex',\n              gap: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              value: input,\n              onChange: e => {\n                console.log('✏️ Input changed:', e.target.value);\n                setInput(e.target.value);\n              },\n              placeholder: \"Ask me about properties, amenities, negotiations, or closing deals...\",\n              disabled: loading,\n              variant: \"outlined\",\n              size: \"small\",\n              multiline: true,\n              maxRows: 3\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 670,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              variant: \"contained\",\n              disabled: loading || !input.trim(),\n              sx: {\n                minWidth: 'auto',\n                px: 2\n              },\n              onClick: () => console.log('🔘 Submit button clicked'),\n              children: loading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 691,\n                columnNumber: 28\n              }, this) : '📤'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 684,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 669,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mt: 1,\n              display: 'flex',\n              flexWrap: 'wrap',\n              gap: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Chip, {\n              label: \"\\uD83D\\uDD0D Search Dallas Properties\",\n              size: \"small\",\n              clickable: true,\n              onClick: () => {\n                console.log('🔍 Quick search clicked');\n                setInput(\"Find 2BHK apartments in Dallas under $500K\");\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 696,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Chip, {\n              label: \"\\uD83D\\uDC15 Pet-Friendly Options\",\n              size: \"small\",\n              clickable: true,\n              onClick: () => {\n                console.log('🐕 Pet-friendly clicked');\n                setInput(\"Show pet-friendly properties\");\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 705,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Chip, {\n              label: \"\\u2728 Luxury Properties\",\n              size: \"small\",\n              clickable: true,\n              onClick: () => {\n                console.log('✨ Luxury clicked');\n                setInput(\"Find luxury condos with amenities\");\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 714,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Chip, {\n              label: \"\\uD83C\\uDFE0 General Search\",\n              size: \"small\",\n              clickable: true,\n              onClick: () => {\n                console.log('🏠 General search clicked');\n                setInput(\"Show me available 2 bedroom apartments\");\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 723,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 695,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 668,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n        open: showPropertyDetails,\n        onClose: () => setShowPropertyDetails(false),\n        maxWidth: \"md\",\n        fullWidth: true,\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          children: \"Property Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 738,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n          children: selectedProperty && /*#__PURE__*/_jsxDEV(Box, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              children: selectedProperty.address\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 742,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              color: \"text.secondary\",\n              sx: {\n                mb: 2\n              },\n              children: [selectedProperty.city, \", \", selectedProperty.state]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 743,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 2,\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(List, {\n                  dense: true,\n                  children: [/*#__PURE__*/_jsxDEV(ListItem, {\n                    children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                      primary: \"\\uD83D\\uDCB0 Price\",\n                      secondary: `$${selectedProperty.price.toLocaleString()}`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 751,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 750,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                    children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                      primary: \"\\uD83D\\uDECF\\uFE0F Bedrooms\",\n                      secondary: selectedProperty.bedrooms\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 754,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 753,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                    children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                      primary: \"\\uD83D\\uDEC1 Bathrooms\",\n                      secondary: selectedProperty.bathrooms\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 757,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 756,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 749,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 748,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(List, {\n                  dense: true,\n                  children: [/*#__PURE__*/_jsxDEV(ListItem, {\n                    children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                      primary: \"\\uD83D\\uDCD0 Square Feet\",\n                      secondary: (_selectedProperty$squ = selectedProperty.square_feet) === null || _selectedProperty$squ === void 0 ? void 0 : _selectedProperty$squ.toLocaleString()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 764,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 763,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                    children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                      primary: \"\\uD83C\\uDFE0 Property Type\",\n                      secondary: selectedProperty.property_type\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 767,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 766,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                    children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                      primary: \"\\uD83D\\uDC15 Pet Friendly\",\n                      secondary: selectedProperty.is_pet_friendly ? 'Yes' : 'No'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 770,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 769,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 762,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 761,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 747,\n              columnNumber: 17\n            }, this), selectedProperty.nearby_amenities && Object.keys(selectedProperty.nearby_amenities).length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                sx: {\n                  mb: 1\n                },\n                children: \"Nearby Amenities:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 779,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 1,\n                children: Object.entries(selectedProperty.nearby_amenities).map(([category, info]) => /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  sm: 6,\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: [category.charAt(0).toUpperCase() + category.slice(1), \":\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 784,\n                      columnNumber: 29\n                    }, this), \" \", info.name, \" (\", info.distance, \" mi)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 783,\n                    columnNumber: 27\n                  }, this)\n                }, category, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 782,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 780,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 778,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 741,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 739,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setShowPropertyDetails(false),\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 795,\n            columnNumber: 13\n          }, this), selectedProperty && /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            onClick: () => {\n              setShowPropertyDetails(false);\n              handlePropertyAction(selectedProperty, 'makeOffer');\n            },\n            children: \"Make Offer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 797,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 794,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 737,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n        open: snackbar.open,\n        autoHideDuration: 6000,\n        onClose: () => setSnackbar({\n          ...snackbar,\n          open: false\n        }),\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          onClose: () => setSnackbar({\n            ...snackbar,\n            open: false\n          }),\n          severity: snackbar.severity,\n          sx: {\n            width: '100%'\n          },\n          children: snackbar.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 816,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 811,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 563,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 562,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatInterface, \"mWU/FHcEcbfmgZ9tt6B3jQiG90M=\");\n_c = ChatInterface;\nconsole.log('🎨 ChatInterface component defined, exporting...');\nexport default ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Box","TextField","Button","Paper","Typography","Container","CircularProgress","Card","CardContent","CardActions","Chip","Divider","Alert","Dialog","DialogTitle","DialogContent","DialogActions","Grid","Avatar","List","ListItem","ListItemText","Snackbar","Badge","Tooltip","IconButton","RealEstateService","jsxDEV","_jsxDEV","Fragment","_Fragment","ChatInterface","_s","_selectedProperty$squ","console","log","messages","setMessages","input","setInput","loading","setLoading","properties","setProperties","selectedProperty","setSelectedProperty","showPropertyDetails","setShowPropertyDetails","snackbar","setSnackbar","open","message","severity","searchSuggestions","setSearchSuggestions","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","welcomeMessage","id","text","sender","timestamp","Date","toISOString","type","handleSubmit","e","preventDefault","trim","userMessage","length","prev","newMessages","currentInput","_response$data","_response$data2","response","chatQuery","status","data","agentMessage","processedProperties","map","p","showAmenities","negotiationStatus","isExactMatch","alternative_count","suggestions","fetchAlternativeProperties","_response$data3","error","name","stack","errorMessage","originalQuery","responseData","alternativeQueries","generateAlternativeQueries","altQuery","_altResponse$data","altResponse","altProperties","isAlternative","altMessage","now","alternatives","toLowerCase","includes","push","replace","slice","handlePropertyAction","property","action","getPropertyAmenities","amenitiesData","suggestedOffer","Math","round","price","toLocaleString","offerAmount","offer","negotiatePrice","negotiation_status","negotiationData","negotiationMessage","finalizeDeal","dealStatus","closingData","warn","handleSuggestionClick","suggestion","query","PropertyCard","_property$square_feet","sx","mb","borderLeft","opacity","position","children","label","size","color","top","right","zIndex","fileName","_jsxFileName","lineNumber","columnNumber","display","justifyContent","alignItems","variant","component","flexGrow","pr","address","city","state","container","spacing","item","xs","sm","bedrooms","bathrooms","square_feet","flexWrap","gap","property_type","is_pet_friendly","year_built","mt","bgcolor","borderRadius","fontWeight","amenities","amenity","index","counter_offer","onClick","_property$negotiation","maxWidth","height","py","flexDirection","elevation","overflow","badgeContent","width","mr","backgroundColor","whiteSpace","ml","ref","px","pb","clickable","cursor","maxHeight","some","borderTop","borderColor","onSubmit","fullWidth","value","onChange","target","placeholder","disabled","multiline","maxRows","minWidth","onClose","dense","primary","secondary","nearby_amenities","Object","keys","entries","category","info","charAt","toUpperCase","distance","autoHideDuration","_c","$RefreshReg$"],"sources":["D:/FreeLance/Real-estate-agent/frontend/src/components/ChatInterface.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport {\r\n  Box,\r\n  TextField,\r\n  Button,\r\n  Paper,\r\n  Typography,\r\n  Container,\r\n  CircularProgress,\r\n  Card,\r\n  CardContent,\r\n  CardActions,\r\n  Chip,\r\n  Divider,\r\n  Alert,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Grid,\r\n  Avatar,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  Snackbar,\r\n  Badge,\r\n  Tooltip,\r\n  IconButton\r\n} from '@mui/material';\r\nimport RealEstateService from '../services/realEstateService';\r\n\r\nconst ChatInterface = () => {\r\n  console.log('🎨 =================================');\r\n  console.log('🎨 CHAT INTERFACE COMPONENT LOADING');\r\n  console.log('🎨 =================================');\r\n  \r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [properties, setProperties] = useState([]);\r\n  const [selectedProperty, setSelectedProperty] = useState(null);\r\n  const [showPropertyDetails, setShowPropertyDetails] = useState(false);\r\n  const [snackbar, setSnackbar] = useState({ open: false, message: '', severity: 'info' });\r\n  const [searchSuggestions, setSearchSuggestions] = useState([]);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  console.log('🎨 Component state initialized');\r\n  console.log('🎨 RealEstateService available:', !!RealEstateService);\r\n\r\n  const scrollToBottom = () => {\r\n    console.log('📜 Scrolling to bottom');\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log('📜 Messages updated, scrolling to bottom');\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    console.log('🎬 ChatInterface mounted, adding welcome message');\r\n    const welcomeMessage = {\r\n      id: 1,\r\n      text: \"👋 Welcome to AI Real Estate Assistant! I'm here to help you find your perfect home.\\n\\n🏠 I can help you with:\\n• Property searches with smart filtering\\n• Detailed amenities information\\n• Price negotiations\\n• Deal closing process\\n\\nTry asking: 'Find 2BHK apartments in Dallas under $500K'\",\r\n      sender: 'agent',\r\n      timestamp: new Date().toISOString(),\r\n      type: 'welcome'\r\n    };\r\n    \r\n    console.log('🎬 Welcome message created:', welcomeMessage);\r\n    setMessages([welcomeMessage]);\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    console.log('📝 =================================');\r\n    console.log('📝 FORM SUBMIT STARTED');\r\n    console.log('📝 =================================');\r\n    \r\n    e.preventDefault();\r\n    console.log('📝 Event prevented');\r\n    console.log('📝 Current input value:', input);\r\n    console.log('📝 Input trimmed:', input.trim());\r\n    \r\n    if (!input.trim()) {\r\n      console.log('⚠️ Empty input, returning early');\r\n      return;\r\n    }\r\n\r\n    console.log('📝 Creating user message...');\r\n    const userMessage = {\r\n      id: messages.length + 1,\r\n      text: input,\r\n      sender: 'user',\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n    console.log('📝 User message created:', userMessage);\r\n\r\n    console.log('📝 Updating messages state...');\r\n    setMessages((prev) => {\r\n      console.log('📝 Previous messages:', prev);\r\n      const newMessages = [...prev, userMessage];\r\n      console.log('📝 New messages array:', newMessages);\r\n      return newMessages;\r\n    });\r\n    \r\n    const currentInput = input;\r\n    console.log('📝 Saving current input:', currentInput);\r\n    console.log('📝 Clearing input field...');\r\n    setInput('');\r\n    \r\n    console.log('📝 Setting loading to true...');\r\n    setLoading(true);\r\n\r\n    try {\r\n      console.log('🚀 Starting API call...');\r\n      console.log('🚀 Calling RealEstateService.chatQuery with:', currentInput);\r\n      \r\n      // Call the service\r\n      const response = await RealEstateService.chatQuery(currentInput);\r\n      \r\n      console.log('✅ API call completed');\r\n      console.log('✅ Response received:', response);\r\n      console.log('✅ Response status:', response.status);\r\n      console.log('✅ Response message:', response.message);\r\n      console.log('✅ Response data:', response.data);\r\n      \r\n      const agentMessage = {\r\n        id: messages.length + 2,\r\n        text: response.message || \"I'm processing your request...\",\r\n        sender: 'agent',\r\n        timestamp: new Date().toISOString(),\r\n        data: response.data,\r\n        status: response.status\r\n      };\r\n      console.log('🤖 Agent message created:', agentMessage);\r\n\r\n      console.log('📝 Adding agent message to state...');\r\n      setMessages((prev) => {\r\n        console.log('📝 Previous messages before agent response:', prev);\r\n        const newMessages = [...prev, agentMessage];\r\n        console.log('📝 Messages after agent response:', newMessages);\r\n        return newMessages;\r\n      });\r\n\r\n      // Enhanced property handling\r\n      console.log('🏠 Checking for properties in response...');\r\n      if (response.data?.properties && response.data.properties.length > 0) {\r\n        console.log('🏠 Exact match properties found:', response.data.properties.length);\r\n        console.log('🏠 First property:', response.data.properties[0]);\r\n        \r\n        const processedProperties = response.data.properties.map(p => ({ \r\n          ...p, \r\n          showAmenities: false,\r\n          negotiationStatus: 'none',\r\n          isExactMatch: true\r\n        }));\r\n        console.log('🏠 Processed properties:', processedProperties);\r\n        \r\n        setProperties(processedProperties);\r\n        setSearchSuggestions([]);\r\n        console.log('🏠 Properties state updated');\r\n        \r\n      } else if (response.data?.alternative_count > 0) {\r\n        // Handle alternative properties when no exact matches\r\n        console.log('🏠 No exact matches, but alternatives available:', response.data.alternative_count);\r\n        console.log('🏠 Suggestions:', response.data.suggestions);\r\n        \r\n        // Store suggestions for display\r\n        setSearchSuggestions(response.data.suggestions || []);\r\n        \r\n        // Try to get some alternative properties automatically\r\n        await fetchAlternativeProperties(currentInput, response.data);\r\n        \r\n      } else {\r\n        console.log('🏠 No properties found in response');\r\n        setProperties([]);\r\n        setSearchSuggestions(response.data?.suggestions || []);\r\n      }\r\n\r\n      // Show success/error snackbar\r\n      if (response.status === 'error') {\r\n        console.log('⚠️ Error response detected, showing snackbar');\r\n        setSnackbar({ \r\n          open: true, \r\n          message: 'Something went wrong. Please try again.', \r\n          severity: 'error' \r\n        });\r\n      } else {\r\n        console.log('✅ Success response detected');\r\n      }\r\n\r\n    } catch (error) {\r\n      console.log('💥 =================================');\r\n      console.log('💥 HANDLE SUBMIT ERROR');\r\n      console.log('💥 =================================');\r\n      console.error('💥 Caught error in handleSubmit:', error);\r\n      console.error('💥 Error name:', error.name);\r\n      console.error('💥 Error message:', error.message);\r\n      console.error('💥 Error stack:', error.stack);\r\n      \r\n      const errorMessage = {\r\n        id: messages.length + 2,\r\n        text: '❌ Sorry, I encountered an error. Please try again or rephrase your question.',\r\n        sender: 'agent',\r\n        timestamp: new Date().toISOString(),\r\n        status: 'error'\r\n      };\r\n      console.log('💥 Error message created:', errorMessage);\r\n      \r\n      setMessages((prev) => [...prev, errorMessage]);\r\n      \r\n      setSnackbar({ \r\n        open: true, \r\n        message: 'Connection error. Please check your internet and try again.', \r\n        severity: 'error' \r\n      });\r\n    } finally {\r\n      console.log('🏁 Setting loading to false...');\r\n      setLoading(false);\r\n      console.log('🏁 Handle submit completed');\r\n    }\r\n  };\r\n\r\n  const fetchAlternativeProperties = async (originalQuery, responseData) => {\r\n    try {\r\n      console.log('🔄 Fetching alternative properties...');\r\n      \r\n      // Generate alternative queries based on the original\r\n      const alternativeQueries = generateAlternativeQueries(originalQuery, responseData);\r\n      \r\n      for (const altQuery of alternativeQueries) {\r\n        console.log('🔄 Trying alternative query:', altQuery);\r\n        \r\n        const altResponse = await RealEstateService.chatQuery(altQuery);\r\n        \r\n        if (altResponse.data?.properties && altResponse.data.properties.length > 0) {\r\n          console.log('🏠 Alternative properties found:', altResponse.data.properties.length);\r\n          \r\n          const altProperties = altResponse.data.properties.map(p => ({ \r\n            ...p, \r\n            showAmenities: false,\r\n            negotiationStatus: 'none',\r\n            isAlternative: true\r\n          }));\r\n          \r\n          setProperties(altProperties);\r\n          \r\n          // Add an info message about alternatives\r\n          const altMessage = {\r\n            id: Date.now(), // Use timestamp for unique ID\r\n            text: `💡 Since no exact matches were found, here are ${altProperties.length} similar properties that might interest you:`,\r\n            sender: 'agent',\r\n            timestamp: new Date().toISOString(),\r\n            type: 'alternatives'\r\n          };\r\n          \r\n          setMessages(prev => [...prev, altMessage]);\r\n          break; // Stop after finding the first successful alternative\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log('❌ Error fetching alternatives:', error);\r\n    }\r\n  };\r\n\r\n  const generateAlternativeQueries = (originalQuery, responseData) => {\r\n    const alternatives = [];\r\n    \r\n    // If San Francisco, try other CA cities\r\n    if (originalQuery.toLowerCase().includes('san francisco')) {\r\n      alternatives.push(originalQuery.replace(/san francisco/i, 'Los Angeles'));\r\n      alternatives.push(originalQuery.replace(/san francisco/i, 'San Diego'));\r\n    }\r\n    \r\n    // If under certain price, try higher prices\r\n    if (originalQuery.includes('$500K') || originalQuery.includes('500K')) {\r\n      alternatives.push(originalQuery.replace(/\\$?500K|\\$?500,000/i, '$600K'));\r\n      alternatives.push(originalQuery.replace(/\\$?500K|\\$?500,000/i, '$700K'));\r\n    }\r\n    \r\n    // Try different cities entirely\r\n    alternatives.push(originalQuery.replace(/in \\w+( \\w+)?/, 'in Dallas'));\r\n    alternatives.push(originalQuery.replace(/in \\w+( \\w+)?/, 'in Houston'));\r\n    alternatives.push(originalQuery.replace(/under \\$\\d+K?/, 'under $600K'));\r\n    \r\n    // Generic fallback\r\n    if (alternatives.length === 0) {\r\n      alternatives.push('Show me 2 bedroom apartments under $600K');\r\n      alternatives.push('Find available apartments with 2 bedrooms');\r\n    }\r\n    \r\n    return alternatives.slice(0, 3); // Limit to 3 alternatives\r\n  };\r\n\r\n  const handlePropertyAction = async (property, action, data = {}) => {\r\n    console.log('🏠 =================================');\r\n    console.log('🏠 PROPERTY ACTION STARTED');\r\n    console.log('🏠 =================================');\r\n    console.log('🏠 Property:', property);\r\n    console.log('🏠 Action:', action);\r\n    console.log('🏠 Data:', data);\r\n    \r\n    try {\r\n      let response;\r\n      \r\n      switch (action) {\r\n        case 'showAmenities':\r\n          console.log('🏢 Fetching amenities for property:', property.id);\r\n          response = await RealEstateService.getPropertyAmenities(property.id);\r\n          console.log('🏢 Amenities response:', response);\r\n          \r\n          if (response.status === 'success') {\r\n            console.log('🏢 Updating property amenities in state');\r\n            setProperties(prev => prev.map(p =>\r\n              p.id === property.id\r\n                ? { ...p, showAmenities: !p.showAmenities, amenitiesData: response.data }\r\n                : p\r\n            ));\r\n          }\r\n          break;\r\n          \r\n        case 'makeOffer':\r\n          const suggestedOffer = Math.round(property.price * 0.95);\r\n          console.log('💰 Making offer:', suggestedOffer);\r\n          setInput(`I want to make an offer of $${suggestedOffer.toLocaleString()} for property ${property.id}`);\r\n          break;\r\n\r\n        case 'negotiate':\r\n          console.log('💰 Processing negotiation for property:', property.id);\r\n          const offerAmount = data.offer || Math.round(property.price * 0.95);\r\n          response = await RealEstateService.negotiatePrice(property.id, offerAmount);\r\n          console.log('💰 Negotiation response:', response);\r\n          \r\n          if (response.status === 'success') {\r\n            console.log('💰 Updating negotiation status');\r\n            setProperties(prev => prev.map(p =>\r\n              p.id === property.id\r\n                ? { ...p, negotiationStatus: response.data.negotiation_status, negotiationData: response.data }\r\n                : p\r\n            ));\r\n            \r\n            const negotiationMessage = {\r\n              id: Date.now(),\r\n              text: response.message,\r\n              sender: 'agent',\r\n              timestamp: new Date().toISOString(),\r\n              data: response.data,\r\n              type: 'negotiation'\r\n            };\r\n            setMessages(prev => [...prev, negotiationMessage]);\r\n          }\r\n          break;\r\n          \r\n        case 'closeDeal':\r\n          console.log('🤝 Closing deal for property:', property.id);\r\n          response = await RealEstateService.finalizeDeal(property.id);\r\n          console.log('🤝 Deal response:', response);\r\n          \r\n          if (response.status === 'success') {\r\n            console.log('🤝 Updating property deal status');\r\n            setProperties(prev => prev.map(p =>\r\n              p.id === property.id\r\n                ? { ...p, dealStatus: 'closed', closingData: response.data }\r\n                : p\r\n            ));\r\n            \r\n            setSnackbar({ \r\n              open: true, \r\n              message: '🎉 Congratulations! Deal successfully closed!', \r\n              severity: 'success' \r\n            });\r\n          }\r\n          break;\r\n          \r\n        case 'viewDetails':\r\n          console.log('👀 Viewing details for property:', property.id);\r\n          setSelectedProperty(property);\r\n          setShowPropertyDetails(true);\r\n          break;\r\n          \r\n        default:\r\n          console.warn('❓ Unknown action:', action);\r\n          break;\r\n      }\r\n    } catch (error) {\r\n      console.error('💥 Property action error:', error);\r\n      setSnackbar({ \r\n        open: true, \r\n        message: 'Action failed. Please try again.', \r\n        severity: 'error' \r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSuggestionClick = (suggestion) => {\r\n    console.log('💡 Suggestion clicked:', suggestion);\r\n    \r\n    // Convert suggestion to a searchable query\r\n    let query = '';\r\n    if (suggestion.includes('budget')) {\r\n      query = input.replace(/under \\$\\d+K?/i, 'under $600K');\r\n    } else if (suggestion.includes('nearby')) {\r\n      query = input.replace(/in \\w+( \\w+)?/i, 'in nearby areas');\r\n    } else {\r\n      query = suggestion;\r\n    }\r\n    \r\n    setInput(query);\r\n  };\r\n\r\n  const PropertyCard = ({ property }) => {\r\n    console.log('🎴 Rendering PropertyCard for:', property.id);\r\n    \r\n    return (\r\n      <Card \r\n        sx={{ \r\n          mb: 2, \r\n          borderLeft: property.dealStatus === 'closed' \r\n            ? '4px solid #4caf50' \r\n            : property.isAlternative \r\n              ? '4px solid #ff9800' \r\n              : '4px solid #2196f3',\r\n          opacity: property.dealStatus === 'closed' ? 0.8 : 1,\r\n          position: 'relative'\r\n        }}\r\n      >\r\n        {property.isAlternative && (\r\n          <Chip \r\n            label=\"Similar Property\" \r\n            size=\"small\" \r\n            color=\"warning\" \r\n            sx={{ position: 'absolute', top: 8, right: 8, zIndex: 1 }}\r\n          />\r\n        )}\r\n        \r\n        <CardContent>\r\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', mb: 2 }}>\r\n            <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1, pr: 2 }}>\r\n              🏠 {property.address}\r\n            </Typography>\r\n            {property.dealStatus === 'closed' && (\r\n              <Chip label=\"SOLD\" color=\"success\" size=\"small\" />\r\n            )}\r\n          </Box>\r\n          \r\n          <Typography color=\"text.secondary\" sx={{ mb: 1 }}>\r\n            📍 {property.city}, {property.state}\r\n          </Typography>\r\n\r\n          <Grid container spacing={2} sx={{ mb: 2 }}>\r\n            <Grid item xs={6} sm={3}>\r\n              <Typography variant=\"h6\" color=\"success.main\">\r\n                💰 ${property.price.toLocaleString()}\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item xs={6} sm={3}>\r\n              <Typography>🛏️ {property.bedrooms} bed</Typography>\r\n            </Grid>\r\n            <Grid item xs={6} sm={3}>\r\n              <Typography>🛁 {property.bathrooms} bath</Typography>\r\n            </Grid>\r\n            <Grid item xs={6} sm={3}>\r\n              <Typography>📐 {property.square_feet?.toLocaleString()} sqft</Typography>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1, mb: 2 }}>\r\n            <Chip label={property.property_type} variant=\"outlined\" size=\"small\" />\r\n            {property.is_pet_friendly && (\r\n              <Chip label=\"🐕 Pet Friendly\" variant=\"outlined\" size=\"small\" color=\"secondary\" />\r\n            )}\r\n            {property.year_built && (\r\n              <Chip label={`Built ${property.year_built}`} variant=\"outlined\" size=\"small\" />\r\n            )}\r\n          </Box>\r\n\r\n          {property.showAmenities && property.amenitiesData && (\r\n            <Box sx={{ mt: 2, p: 2, bgcolor: 'grey.50', borderRadius: 1 }}>\r\n              <Typography variant=\"subtitle2\" sx={{ mb: 1, fontWeight: 'bold' }}>\r\n                🏢 Property Amenities:\r\n              </Typography>\r\n              {property.amenitiesData.amenities && (\r\n                <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\r\n                  {property.amenitiesData.amenities.map((amenity, index) => (\r\n                    <Chip key={index} label={amenity} size=\"small\" variant=\"outlined\" />\r\n                  ))}\r\n                </Box>\r\n              )}\r\n            </Box>\r\n          )}\r\n\r\n          {property.negotiationData && (\r\n            <Alert \r\n              severity={property.negotiationData.negotiation_status === 'accepted' ? 'success' : 'info'}\r\n              sx={{ mt: 2 }}\r\n            >\r\n              <strong>Negotiation Update:</strong> {property.negotiationData.message || 'Offer under review'}\r\n              {property.negotiationData.counter_offer && (\r\n                <Typography variant=\"body2\" sx={{ mt: 1 }}>\r\n                  Counter Offer: ${property.negotiationData.counter_offer.toLocaleString()}\r\n                </Typography>\r\n              )}\r\n            </Alert>\r\n          )}\r\n        </CardContent>\r\n\r\n        <CardActions sx={{ flexWrap: 'wrap', gap: 1 }}>\r\n          <Button size=\"small\" onClick={() => handlePropertyAction(property, 'viewDetails')}>\r\n            ℹ️ View Details\r\n          </Button>\r\n          \r\n          <Button size=\"small\" onClick={() => handlePropertyAction(property, 'showAmenities')}>\r\n            {property.showAmenities ? '🔽 Hide Amenities' : '🔼 Show Amenities'}\r\n          </Button>\r\n\r\n          {property.dealStatus !== 'closed' && (\r\n            <>\r\n              <Button\r\n                size=\"small\"\r\n                variant=\"contained\"\r\n                onClick={() => handlePropertyAction(property, 'makeOffer')}\r\n              >\r\n                💰 Make Offer\r\n              </Button>\r\n\r\n              {property.negotiationStatus === 'accepted' && (\r\n                <Button\r\n                  size=\"small\"\r\n                  color=\"success\"\r\n                  variant=\"contained\"\r\n                  onClick={() => handlePropertyAction(property, 'closeDeal')}\r\n                >\r\n                  ✅ Close Deal\r\n                </Button>\r\n              )}\r\n              \r\n              {property.negotiationStatus === 'counter_offered' && (\r\n                <Button\r\n                  size=\"small\"\r\n                  color=\"warning\"\r\n                  variant=\"contained\"\r\n                  onClick={() => handlePropertyAction(property, 'negotiate', { \r\n                    offer: property.negotiationData?.counter_offer \r\n                  })}\r\n                >\r\n                  🤝 Accept Counter\r\n                </Button>\r\n              )}\r\n            </>\r\n          )}\r\n        </CardActions>\r\n      </Card>\r\n    );\r\n  };\r\n\r\n  console.log('🎨 Rendering ChatInterface component');\r\n  console.log('🎨 Current state - messages:', messages.length);\r\n  console.log('🎨 Current state - properties:', properties.length);\r\n  console.log('🎨 Current state - loading:', loading);\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\">\r\n      <Box sx={{ height: '100vh', py: 2, display: 'flex', flexDirection: 'column' }}>\r\n        <Paper elevation={3} sx={{ flexGrow: 1, display: 'flex', flexDirection: 'column', borderRadius: 2, overflow: 'hidden' }}>\r\n          \r\n          {/* Header */}\r\n          <Box sx={{ p: 2, bgcolor: 'primary.main', color: 'white', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n            <Typography variant=\"h6\">🏠 AI Real Estate Assistant</Typography>\r\n            {properties.length > 0 && (\r\n              <Badge badgeContent={properties.length} color=\"secondary\">\r\n                <Typography variant=\"body2\">Properties</Typography>\r\n              </Badge>\r\n            )}\r\n          </Box>\r\n\r\n          {/* Messages Area */}\r\n          <Box sx={{ flexGrow: 1, overflow: 'auto', p: 2, display: 'flex', flexDirection: 'column' }}>\r\n            {messages.map((message) => {\r\n              console.log('💬 Rendering message:', message.id, message.sender);\r\n              return (\r\n                <Box\r\n                  key={message.id}\r\n                  sx={{\r\n                    display: 'flex',\r\n                    justifyContent: message.sender === 'user' ? 'flex-end' : 'flex-start',\r\n                    mb: 2,\r\n                    alignItems: 'flex-start'\r\n                  }}\r\n                >\r\n                  {message.sender === 'agent' && (\r\n                    <Avatar sx={{ bgcolor: 'secondary.main', width: 32, height: 32, mr: 1, mt: 0.5 }}>\r\n                      AI\r\n                    </Avatar>\r\n                  )}\r\n                  \r\n                  <Paper\r\n                    sx={{\r\n                      p: 2,\r\n                      backgroundColor: message.sender === 'user' \r\n                        ? 'primary.light' \r\n                        : message.status === 'error' \r\n                          ? 'error.light'\r\n                          : message.type === 'alternatives'\r\n                            ? 'warning.light'\r\n                            : 'grey.100',\r\n                      color: message.sender === 'user' ? 'white' : 'text.primary',\r\n                      maxWidth: '80%',\r\n                      borderRadius: 2,\r\n                      whiteSpace: 'pre-line'\r\n                    }}\r\n                  >\r\n                    <Typography variant=\"body1\">{message.text}</Typography>\r\n                  </Paper>\r\n\r\n                  {message.sender === 'user' && (\r\n                    <Avatar sx={{ bgcolor: 'primary.main', width: 32, height: 32, ml: 1, mt: 0.5 }}>\r\n                      U\r\n                    </Avatar>\r\n                  )}\r\n                </Box>\r\n              );\r\n            })}\r\n            <div ref={messagesEndRef} />\r\n          </Box>\r\n\r\n          {/* Search Suggestions */}\r\n          {searchSuggestions.length > 0 && properties.length === 0 && (\r\n            <Box sx={{ px: 2, pb: 1 }}>\r\n              <Typography variant=\"subtitle2\" sx={{ mb: 1, fontWeight: 'bold' }}>\r\n                💡 Try these suggestions:\r\n              </Typography>\r\n              <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\r\n                {searchSuggestions.map((suggestion, index) => (\r\n                  <Chip\r\n                    key={index}\r\n                    label={suggestion}\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                    clickable\r\n                    onClick={() => handleSuggestionClick(suggestion)}\r\n                    sx={{ cursor: 'pointer' }}\r\n                  />\r\n                ))}\r\n              </Box>\r\n            </Box>\r\n          )}\r\n\r\n          {/* Properties Display */}\r\n          {properties.length > 0 && (\r\n            <Box sx={{ maxHeight: '400px', overflow: 'auto', px: 2, pb: 2 }}>\r\n              <Divider sx={{ mb: 2 }} />\r\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 2 }}>\r\n                <Typography variant=\"h6\">\r\n                  🏠 {properties.some(p => p.isAlternative) ? 'Similar' : 'Found'} Properties ({properties.length}):\r\n                </Typography>\r\n                {properties.some(p => p.isAlternative) && (\r\n                  <Chip label=\"Alternative Results\" color=\"warning\" size=\"small\" />\r\n                )}\r\n              </Box>\r\n              {properties.map((property) => {\r\n                console.log('🏠 Rendering property card:', property.id);\r\n                return <PropertyCard key={property.id} property={property} />;\r\n              })}\r\n            </Box>\r\n          )}\r\n\r\n          {/* Input Area */}\r\n          <Box sx={{ p: 2, borderTop: '1px solid', borderColor: 'divider' }}>\r\n            <Box component=\"form\" onSubmit={handleSubmit} sx={{ display: 'flex', gap: 1 }}>\r\n              <TextField\r\n                fullWidth\r\n                value={input}\r\n                onChange={(e) => {\r\n                  console.log('✏️ Input changed:', e.target.value);\r\n                  setInput(e.target.value);\r\n                }}\r\n                placeholder=\"Ask me about properties, amenities, negotiations, or closing deals...\"\r\n                disabled={loading}\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                multiline\r\n                maxRows={3}\r\n              />\r\n              <Button \r\n                type=\"submit\" \r\n                variant=\"contained\" \r\n                disabled={loading || !input.trim()}\r\n                sx={{ minWidth: 'auto', px: 2 }}\r\n                onClick={() => console.log('🔘 Submit button clicked')}\r\n              >\r\n                {loading ? <CircularProgress size={24} /> : '📤'}\r\n              </Button>\r\n            </Box>\r\n            \r\n            <Box sx={{ mt: 1, display: 'flex', flexWrap: 'wrap', gap: 1 }}>\r\n              <Chip \r\n                label=\"🔍 Search Dallas Properties\" \r\n                size=\"small\" \r\n                clickable \r\n                onClick={() => {\r\n                  console.log('🔍 Quick search clicked');\r\n                  setInput(\"Find 2BHK apartments in Dallas under $500K\");\r\n                }}\r\n              />\r\n              <Chip \r\n                label=\"🐕 Pet-Friendly Options\" \r\n                size=\"small\" \r\n                clickable \r\n                onClick={() => {\r\n                  console.log('🐕 Pet-friendly clicked');\r\n                  setInput(\"Show pet-friendly properties\");\r\n                }}\r\n              />\r\n              <Chip \r\n                label=\"✨ Luxury Properties\" \r\n                size=\"small\" \r\n                clickable \r\n                onClick={() => {\r\n                  console.log('✨ Luxury clicked');\r\n                  setInput(\"Find luxury condos with amenities\");\r\n                }}\r\n              />\r\n              <Chip \r\n                label=\"🏠 General Search\" \r\n                size=\"small\" \r\n                clickable \r\n                onClick={() => {\r\n                  console.log('🏠 General search clicked');\r\n                  setInput(\"Show me available 2 bedroom apartments\");\r\n                }}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        </Paper>\r\n\r\n        {/* Property Details Modal */}\r\n        <Dialog open={showPropertyDetails} onClose={() => setShowPropertyDetails(false)} maxWidth=\"md\" fullWidth>\r\n          <DialogTitle>Property Details</DialogTitle>\r\n          <DialogContent>\r\n            {selectedProperty && (\r\n              <Box>\r\n                <Typography variant=\"h6\">{selectedProperty.address}</Typography>\r\n                <Typography color=\"text.secondary\" sx={{ mb: 2 }}>\r\n                  {selectedProperty.city}, {selectedProperty.state}\r\n                </Typography>\r\n                \r\n                <Grid container spacing={2}>\r\n                  <Grid item xs={12} sm={6}>\r\n                    <List dense>\r\n                      <ListItem>\r\n                        <ListItemText primary=\"💰 Price\" secondary={`$${selectedProperty.price.toLocaleString()}`} />\r\n                      </ListItem>\r\n                      <ListItem>\r\n                        <ListItemText primary=\"🛏️ Bedrooms\" secondary={selectedProperty.bedrooms} />\r\n                      </ListItem>\r\n                      <ListItem>\r\n                        <ListItemText primary=\"🛁 Bathrooms\" secondary={selectedProperty.bathrooms} />\r\n                      </ListItem>\r\n                    </List>\r\n                  </Grid>\r\n                  <Grid item xs={12} sm={6}>\r\n                    <List dense>\r\n                      <ListItem>\r\n                        <ListItemText primary=\"📐 Square Feet\" secondary={selectedProperty.square_feet?.toLocaleString()} />\r\n                      </ListItem>\r\n                      <ListItem>\r\n                        <ListItemText primary=\"🏠 Property Type\" secondary={selectedProperty.property_type} />\r\n                      </ListItem>\r\n                      <ListItem>\r\n                        <ListItemText primary=\"🐕 Pet Friendly\" secondary={selectedProperty.is_pet_friendly ? 'Yes' : 'No'} />\r\n                      </ListItem>\r\n                    </List>\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                {/* Nearby Amenities */}\r\n                {selectedProperty.nearby_amenities && Object.keys(selectedProperty.nearby_amenities).length > 0 && (\r\n                  <Box sx={{ mt: 2 }}>\r\n                    <Typography variant=\"h6\" sx={{ mb: 1 }}>Nearby Amenities:</Typography>\r\n                    <Grid container spacing={1}>\r\n                      {Object.entries(selectedProperty.nearby_amenities).map(([category, info]) => (\r\n                        <Grid item xs={12} sm={6} key={category}>\r\n                          <Typography variant=\"body2\">\r\n                            <strong>{category.charAt(0).toUpperCase() + category.slice(1)}:</strong> {info.name} ({info.distance} mi)\r\n                          </Typography>\r\n                        </Grid>\r\n                      ))}\r\n                    </Grid>\r\n                  </Box>\r\n                )}\r\n              </Box>\r\n            )}\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={() => setShowPropertyDetails(false)}>Close</Button>\r\n            {selectedProperty && (\r\n              <Button \r\n                variant=\"contained\" \r\n                onClick={() => {\r\n                  setShowPropertyDetails(false);\r\n                  handlePropertyAction(selectedProperty, 'makeOffer');\r\n                }}\r\n              >\r\n                Make Offer\r\n              </Button>\r\n            )}\r\n          </DialogActions>\r\n        </Dialog>\r\n\r\n        {/* Snackbar for notifications */}\r\n        <Snackbar\r\n          open={snackbar.open}\r\n          autoHideDuration={6000}\r\n          onClose={() => setSnackbar({ ...snackbar, open: false })}\r\n        >\r\n          <Alert onClose={() => setSnackbar({ ...snackbar, open: false })} severity={snackbar.severity} sx={{ width: '100%' }}>\r\n            {snackbar.message}\r\n          </Alert>\r\n        </Snackbar>\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nconsole.log('🎨 ChatInterface component defined, exporting...');\r\nexport default ChatInterface;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}